5  REM EEPROM 25LC640 write,read test
7  INPUT "channel (1|2)? " C
10  SPI_INIT C,1 : SPI_SEL C : PRINT "\nchannel ",C   
18 REM write to eeprom 
20 REM send WREN cmd # 6
30 POKEB PAD,6
40 SPI_WRITE C,1,PAD : SPI_DSEL C
48 REM can program up to 32 bytes, WR cmd # 2 
50 SPI_SEL C 
60 RANDOMIZE 
70 POKEB PAD ,2 POKEB PAD +1 ,0 POKEB PAD +2 ,0 
80 FOR I=3 TO 12 A=RND(255) ? A, : POKEB PAD+I,A NEXT I  
90 SPI_WRITE C ,13 ,PAD 
100 SPI_DSEL C : PAUSE 10 : PRINT CHAR(13),"Write completed."
110 SPI_SEL C 
118 PRINT "reading back" 
120 POKEB PAD,3 POKEB PAD+1,0 POKEB PAD+2,0 
130 SPI_WRITE C,3,PAD  
140 FOR A =1 TO 10 PRINT SPI_READ(C),:NEXT A 
150 SPI_DSEL C
160 END

